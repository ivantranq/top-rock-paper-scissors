<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    // This script will take a users input and play a game of rock paper scissors
    // For now this will have no GUI and will be played through the browser's console

    // GET computer's choice first
    function getComputerChoice() {
      const randomNum = Math.floor(Math.random() * (4 - 1))+1;
      if (randomNum === 1) {
        return "Rock"
      } else if (randomNum === 2) {
        return "Paper"
      } else {
        return "Scissors"
      }
    }
    
    function playRound(playerSelection, computerSelection) {
      // Takes two string inputs - playerSelection may have a mix of capitalisation

      // uncapitalise playerSelection to stay consistent
      const playerSelectionLowerCase = playerSelection.toLowerCase();
      console.log(`playerSelection: ${playerSelectionLowerCase}`);
      console.log(`computerSelection: ${computerSelection}`);
      
      // Figure out which of the 3 the player selected and compare
      // to possible choices from computer
      if (playerSelectionLowerCase === 'rock') {
        switch (computerSelection) {
          case "Rock":
            return "Draw";
          case "Paper":
            return "You Lose! Paper beats Rock";
          case "Scissors":
            return "You Win! Rock beats Scissors";
        }
      } else if (playerSelectionLowerCase === 'paper') {
        switch (computerSelection) {
          case "Rock":
            return "You Win! Paper Beats Rock";
          case "Paper":
            return "Draw";
          case "Scissors":
            return "You Lose! Scissors beats Paper";
        }
      } else if (playerSelectionLowerCase === 'scissors'){
        switch (computerSelection) {
          case "Rock":
            return "You Lose! Rock beats Scissors";
          case "Paper":
            return "You Win! Scissors beats Paper";
          case "Scissors":
            return "Draw";
        }
      } else {
        return "Invalid input";
      }
    }

    function game() {
      // loop through playRound 5 times each time taking an input from the user
      
      // have to keep track of number of wins for user and computer
      let playerWins = 0;
      let computerWins = 0;

      // initialise variables before using in for loop.
      let playerSelection;
      let result;
      let playerWon;

      for (let i = 0; i<5; i++) {
        // first get users input
        console.log(`Round ${i+1} --------------`);
        playerSelection = window.prompt("Rock, paper or scissors?");
        playerSelection = playerSelection.toLowerCase();
        result = playRound(playerSelection, getComputerChoice());
        console.log(result);

        // Only increments win counters if it is not a draw
        if (result !== 'Draw') {
          playerWon = result.includes("Win");
          switch (playerWon) {
            case true:
              playerWins++;
              break;
            case false:
              computerWins++;
              break;
          }
        }
        // console.log(`playerWins: ${playerWins}`);
        // console.log(`computerWins: ${computerWins}`);
      }
      // Prints out who the winner is
      console.log('-------------------------')
      console.log(`You won ${playerWins} times. The computer won ${computerWins} times`);
      if (playerWins > computerWins) {
        console.log(`You are the winner!`);
      } else if (computerWins > playerWins) {
        console.log('The computer is the winner!');
      } else {
        console.log('You drew with the computer!');
      }
    }
    // console.log(playRound("roCk",getComputerChoice()));
    game();

  </script>
</body>
</html>